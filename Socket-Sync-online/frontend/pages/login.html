<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">

    <title>Socket-Sync Login</title>

</head>

<body class="auth-body">

    <!-- Auth Navbar -->
    <nav class="auth-nav">
        <a href="#" class="auth-nav-logo">
            <img src="../material/images/Socket-Sync-logo.png" alt="Logo">
            Socket-Sync
        </a>
        <div class="auth-nav-links">
            <a href="#" class="auth-link" onclick="switchView(0); return false;">Home</a>
            <a href="#" class="auth-link" onclick="switchView(1)">About</a>
            <a href="#" class="auth-link" onclick="switchView(2)">Contact Us</a>
            <a href="#" class="auth-link" onclick="switchView(3)">Help/Support</a>
            <a href="/signup" class="auth-btn-sm">Sign Up</a>
        </div>
    </nav>

    <div id="view-home" class="carousel-view view-center">
        <div class="auth-box">
            <h3>
                <img src="../material/images/Socket-Sync-logo.png" alt="Logo"
                    style="height: 40px; border-radius: 8px; vertical-align: middle; margin-right: 10px;">
                Socket-Sync
            </h3>
            <form id="loginForm">
                <input id="uid" class="form-control" placeholder="Email Address" required>
                <input id="pwd" class="form-control" type="password" placeholder="Password" required>
                <button type="submit" class="btn btn-dark w-100">Login</button>
            </form>
            <div class="link-text">
                Don't have an account? <a href="/signup">Sign up</a>
            </div>

            <!-- Social Login Divider -->
            <div class="social-divider">
                <span>or continue with</span>
            </div>

            <!-- Social Login Buttons -->
            <div class="social-login-buttons">
                <button onclick="loginWithGoogle()" class="social-btn google-btn">
                    <i class="fab fa-google"></i>
                    Google
                </button>
                <button onclick="loginWithGithub()" class="social-btn github-btn">
                    <i class="fab fa-github"></i>
                    GitHub
                </button>
            </div>

            <div style="margin-top: 15px; border-top: 1px solid var(--border-color); padding-top: 15px;">
                <button onclick="startQrScanner()" class="btn btn-outline-light"
                    style="background: transparent; border: 1px solid var(--primary-color); width: 100%;">
                    <i class="fas fa-qrcode"></i> Scan QR to Login
                </button>
            </div>

            <div id="qr-reader" style="width: 100%; margin-top: 10px; display:none;"></div>
        </div>
    </div>

    <!-- QR Scanner Lib -->
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>

    <!-- Info Modals -->
    <!-- About Modal -->
    <!-- Info Modals (Carousel Views) -->
    <!-- About Modal (Index 1) -->
    <div id="modal-about" class="carousel-view view-right">
        <div class="info-modal-content">
            <!-- <span class="info-close-btn" onclick="switchView(0)">&times;</span> -->
            <h2>About Socket Sync</h2>
            <p>Socket Sync is a cutting-edge real-time communication platform designed for seamless connectivity.</p>
            <h4>Technology Stack</h4>
            <ul>
                <li><strong>Frontend:</strong> HTML5, CSS3, JavaScript (Bootstrap 5)</li>
                <li><strong>Backend:</strong> Python (Flask, Flask-SocketIO)</li>
                <li><strong>Database:</strong> MySQL</li>
                <li><strong>Analytics:</strong> Matplotlib, NumPy, Pandas</li>
            </ul>
        </div>
    </div>

    <!-- Contact Modal (Index 2) -->
    <div id="modal-contact" class="carousel-view view-right">
        <div class="info-modal-content">
            <h2>Contact Us</h2>
            <p>For inquiries, please reach out to our team:</p>
            <ul style="list-style: none; padding: 0;">
                <li style="margin-bottom: 15px;">
                    <i class="fas fa-user-circle" style="color: var(--primary-color); margin-right: 10px;"></i>
                    <strong>Chaudhary Kaushal Rakeshbhai</strong>
                </li>
                <li style="margin-bottom: 15px;">
                    <i class="fas fa-user-circle" style="color: var(--primary-color); margin-right: 10px;"></i>
                    <strong>Thakor Kanaiya</strong>
                </li>
                <li>
                    <i class="fas fa-user-circle" style="color: var(--primary-color); margin-right: 10px;"></i>
                    <strong>Suriya Mihir</strong>
                </li>
            </ul>
        </div>
    </div>

    <!-- Help Modal (Index 3) -->
    <div id="modal-help" class="carousel-view view-right">
        <div class="info-modal-content">
            <h2>Help & Support</h2>
            <p>New to Socket Sync? Here's how to get started:</p>
            <ol>
                <li><strong>Sign Up:</strong> Create an account with your User ID and Password.</li>
                <li><strong>Login:</strong> Access your account using your credentials or QR code.</li>
                <li><strong>Chat:</strong> Select a user from the sidebar to start messaging.</li>
                <li><strong>Share:</strong> You can share images, videos, and files securely.</li>
            </ol>
            <p style="margin-top: 15px; font-size: 0.9rem;">Still facing issues? Contact us for support.</p>
        </div>
    </div>

    <!-- Modal Script -->
    <script>
        // Carousel Logic
        let currentIndex = 0;
        const views = ['view-home', 'modal-about', 'modal-contact', 'modal-help'];

        function switchView(targetIndex) {
            if (currentIndex === targetIndex) return;

            const currentView = document.getElementById(views[currentIndex]);
            const nextView = document.getElementById(views[targetIndex]);

            // Determine flow direction and corresponding classes
            const isForward = targetIndex > currentIndex;
            const enterFromClass = isForward ? 'view-right' : 'view-left';
            const exitToClass = isForward ? 'view-left' : 'view-right';

            // 1. Prepare Next View (Instant move to start position if needed)
            if (!nextView.classList.contains(enterFromClass)) {
                nextView.style.transition = 'none';
                nextView.classList.remove('view-center', 'view-left', 'view-right');
                nextView.classList.add(enterFromClass);

                // Force Reflow
                void nextView.offsetWidth;

                // Restore Transition
                nextView.style.transition = '';
            }

            // 2. Animate
            requestAnimationFrame(() => {
                // Animate Current View Out
                currentView.classList.remove('view-center', 'view-left', 'view-right');
                currentView.classList.add(exitToClass);

                // Animate Next View In
                nextView.classList.remove('view-left', 'view-right');
                nextView.classList.add('view-center');
            });

            currentIndex = targetIndex;
        }
    </script>

    <script type="module" src="../js/login.js"></script>
</body>

</html>